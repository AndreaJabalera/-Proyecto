# Cargar el dataset
data("AirPassengers")

# Verificar la clase y estructura de la serie temporal
print(class(AirPassengers))   # Debe devolver "ts", que indica que es una serie temporal
print(summary(AirPassengers)) # Resumen estadístico
print(start(AirPassengers))   # Muestra el inicio de la serie
print(end(AirPassengers))     # Muestra el final de la serie
print(frequency(AirPassengers)) # Frecuencia de la serie (debería ser 12, mensual)
# Graficar la serie temporal
plot(AirPassengers, main = "Número de Pasajeros Internacionales de Aerolíneas (1949-1960)",
     ylab = "Número de Pasajeros", xlab = "Año", col = "blue")

# Estadísticas descriptivas
mean_airpassengers <- mean(AirPassengers)
sd_airpassengers <- sd(AirPassengers)

cat("Media: ", mean_airpassengers, "\n")
cat("Desviación Estándar: ", sd_airpassengers, "\n")
# Descomponer la serie temporal
decomposed_data <- decompose(AirPassengers)

# Visualizar los componentes
plot(decomposed_data)

# Componentes: 
# decomposed_data$trend (tendencia)
# decomposed_data$seasonal (estacionalidad)
# decomposed_data$random (componente aleatorio)
# Graficar ACF y PACF
acf(AirPassengers, main = "ACF de la serie AirPassengers")
pacf(AirPassengers, main = "PACF de la serie AirPassengers")

# Instalar el paquete tseries si no está instalado
if (!require(tseries)) install.packages("tseries")

# Prueba de Dickey-Fuller aumentada para estacionariedad
library(tseries)
adf_test <- adf.test(AirPassengers)

cat("P-valor de la prueba de Dickey-Fuller: ", adf_test$p.value, "\n")

# Si la serie no es estacionaria, se puede diferenciar la serie
if (adf_test$p.value > 0.05) {
  AirPassengers_diff <- diff(AirPassengers)
  # Graficar la serie diferenciada
  plot(AirPassengers_diff, main = "Serie Temporal Diferenciada")
  acf(AirPassengers_diff, main = "ACF de la serie diferenciada")
  pacf(AirPassengers_diff, main = "PACF de la serie diferenciada")
}
# Boxplot para detectar outliers
boxplot(AirPassengers, main = "Boxplot de la serie AirPassengers", ylab = "Número de Pasajeros")

# Para destacar los outliers en la serie temporal
outliers <- AirPassengers[AirPassengers > quantile(AirPassengers, 0.75) + 1.5*IQR(AirPassengers) | 
                          AirPassengers < quantile(AirPassengers, 0.25) - 1.5*IQR(AirPassengers)]
points(time(outliers), outliers, col = "red", pch = 19)  # Marca los outliers en rojo
# Cargar el dataset
data("AirPassengers")
# Graficar la serie temporal
plot(AirPassengers, main = "Número de Pasajeros Internacionales de Aerolíneas (1949-1960)",
     ylab = "Número de Pasajeros", xlab = "Año", col = "blue")
# Estadísticas descriptivas
mean_airpassengers <- mean(AirPassengers)
sd_airpassengers <- sd(AirPassengers)
cat("Media: ", mean_airpassengers, "\n")
cat("Desviación Estándar: ", sd_airpassengers, "\n")
